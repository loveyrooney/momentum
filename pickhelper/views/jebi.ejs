<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pick Helper - 제비 뽑기</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.0.min.js" ></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="../public/css/jebi.css">
</head>
<body>
    <header>
        <h3>Pick Helper</h3>
        <h1>제비 뽑기</h1>
        <div id="subtitle">
            <span class="subtitle">역시 구관이 명관이쥬👍</span><br/>
            <span class="subtitle">긴 설명 필요없이 노빠꾸 고✅</span>
        </div>
    </header>
    <aside>
        <form action="/jebimake" method="get">
            <p class="select">제비 개수
                <select name="count">
                    <option value="">뽑을 제비의 개수를 선택하세요</option>
                    <% for (let i=2; i<21; i++) { %>
                    <option value="<%=i%>"><%=i%>개</option>
                    <% } %>
                </select>
            <p class="select">제비 유형
                <select name="content">
                    <option value="">제비의 유형을 선택하세요</option>
                    <option value="number" selected>번호 매기기</option>
                    <option value="king">왕 뽑기</option>
                    <option value="custom">커스텀 설정</option>
                </select>
            <fieldset>
                <legend>커스텀 설정</legend>
                <span>제비 안에 들어갈 내용을 적어주세요.</span><br>
                <span>제비의 개수와 들어갈 내용의 개수가 같아야 해요!👌</span><br>
                <input type="text" name="custom" placeholder="ex) 마피아, 시민, 경찰"/>
            </fieldset>
            </p>
            <button type="submit">만들기</button>
        </form>
    </aside>
    <article>
        <div class="jebiboard">
            <% for(let j=0; j<count; j++) { %>
                <% if ( content > 3 ) { %>
                    <p onclick="result(this)"><span class="d-none"><%=array[j]%></span></p>
                <% } else if ( content === 3) { %>
                    <p onclick="result(this)"><span class="d-none"><%=array[j]%></span></p>   
                <% } else { %>
                    <p onclick="result(this)"><span class="d-none"><%=array[j]%></span></p>
                <% } %>    
            <% } %>
        </div>
        <h3><a href="/">다른 게임 하러 가기</a></h3>
        <footer><p>programed by rooney</p></footer>
    </article>
    <script>
        if (<%=validation%> == 4041) {
            alert("제비 유형이 커스텀이 아닙니다.");
            location.href='/jebi';
        } else if (<%=validation%> == 4042) {
            alert("커스텀 설정이 정확하지 않습니다.");
            location.href='/jebi';
        }

        function result(e) {
            $(e.firstChild).removeClass("d-none");
        }
    </script>
</body>
</html>